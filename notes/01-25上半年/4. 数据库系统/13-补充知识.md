### 1. NOSQL的优点：
1. 支持高并发访问，性能较高
2. 数据存储结构松散，能够灵活支持多种类型的数据格式
3. 能够支持海量数据的存储，且易于横向扩展
4. 基于分布式数据存储，不存在单点故障或性能瓶颈，系统可用性高

### 2. SQL语句优化
1. 建立物化视图或尽可能减少多表查询
2. 以不相干查询替代相干查询
3. 只检索需要的列
4. 用带IN的条件子句等价替换OR子句
5. 经常提交COMMIT，以尽早释放锁
6. 避免嵌套的游标（Cursor）和多重循环

### 3. 逻辑数据模型设计过程包含哪些任务
确定数据模型、将ER图转换成指定的数据模型、确定完整性约束、确定用户视图

### 4. 分布式缓存数据库
#### 4.1 MemCache存在的可靠性和数据一致性问题
1. 可靠性问题：MemCache数据仅存在于内存中，宕机或重启数据将全部失效
2. 数据一致性问题：MemCache不支持事务，存在数据一致性问题。
#### 4.2 Redis与原有关系数据库的数据同步方案
读数据时，先从Redis读取，如果Redis读取不到，则从数据库读取，并同步到Redis
写数据时，先写到数据库，再同步到Redis
#### 4.3 Redis分布式存储的两种常见方案
+ 主从：就像一家只有一个柜台（主节点）的银行，但有很多复印机（从节点）。所有业务办理（写操作）必须去柜台，但你可以从任何一台复印机（读操作）查看你的账本信息。柜台坏了，可以提拔一台复印机成为新柜台

+ Redis Cluster（官方集群方案）：就像一家有很多专业柜台（主节点）的银行，比如A柜台负责存款业务（数据分片A），B柜台负责贷款业务（数据分片B）。每个柜台也都有自己的复印机（从节点）。你办理什么业务，就去对应的柜台。
	+ 将所有数据划分为 **16384** 个哈希槽。每个节点负责一部分槽位
	+ 客户端可以连接集群中任意节点。如果数据不在该节点上，节点会返回 **MOVED** 重定向错误，告知客户端正确的节点地址。成熟的客户端会缓存槽位配置，并直接路由到正确节点

<font color="#ff0000">不是二选一的关系，而是互补与融合：实际上，Redis Cluster 的每个分片内部，本身就是一套主从方。Cluster 可以看作是 “多套主从组合 + 数据分片 + 集群管理”的超级集合</font>
#### 4.4 Redis集群切片的常见方式
如果采用的是集群方案时，就涉及到，客户端如何访问对应的服务器节点？
+ 客户端切片
+ Twemproxy
+ Redis Cluster
#### 4.5 主从方案时的模式
为了解决主从切换时的配置更新问题，通常会引入第三个角色：Sentinel（哨兵）
这样客户端只要通过Sentinel来获取主节点（写）和从节点（读）。就不需要硬编码到代码中。
#### 4.6 分布式数据库的概念
分布式数据库是利用计算机网络将物理上分散的多个数据库单元连接起来组成的一个逻辑上统一的数据库。每个被连接起来的数据库单元称为节点或站点
#### 4.7 提高分布式数据库系统性能的常见实现技术
+ 读写分离
+ 数据分片：包括水平分片和垂直分片
+ 数据索引
+ 数据缓存
+ 负载均衡
#### 4.8 分片算法
+ 哈希算法：对分片键进行哈希计算，然后根据哈希值决定数据归属。`节点编号 = hash(分片键) % 节点总数`。<u><font color="#ff0000">节点数量变化时，取模运算的结果会大变，导致绝大多数数据需要重新分布，引发大规模数据迁移</font></u>，<u><font color="#ff0000">但数据分布均匀</font></u>。
+ 一致性哈希算法：构造一个哈希环，将节点和数据都映射到环上，数据归属于从它自身位置开始，顺时针找到的第一个节点。<u><font color="#ff0000">实现复杂，可能存在数据倾斜，但扩展性好</font></u>。
+ 范围分片：按照分片键的连续范围进行划分。将用户ID `[1-1000]` 分到节点1，`[1001-2000]` 分到节点2。<u><font color="#ff0000">需要人工预先规划范围边界</font></u>，<u><font color="#ff0000">但支持高效范围查询，因为数据是连续存储的</font></u>。








